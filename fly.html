<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated Fly</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(to bottom, #87CEEB 0%, #B0D9F1 50%, #D4E9F7 100%);
            position: relative;
        }

        /* Texture overlay */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
            pointer-events: none;
        }

        /* Cloud styles */
        .cloud {
            position: absolute;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 100px;
            opacity: 0.8;
        }

        .cloud::before,
        .cloud::after {
            content: '';
            position: absolute;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 100px;
        }

        .cloud1 {
            width: 150px;
            height: 50px;
            top: 15%;
            left: 10%;
            animation: float1 25s infinite ease-in-out;
        }

        .cloud1::before {
            width: 60px;
            height: 60px;
            top: -30px;
            left: 20px;
        }

        .cloud1::after {
            width: 80px;
            height: 50px;
            top: -20px;
            right: 20px;
        }

        .cloud2 {
            width: 200px;
            height: 60px;
            top: 30%;
            right: 15%;
            animation: float2 30s infinite ease-in-out;
        }

        .cloud2::before {
            width: 70px;
            height: 70px;
            top: -35px;
            left: 30px;
        }

        .cloud2::after {
            width: 90px;
            height: 60px;
            top: -25px;
            right: 30px;
        }

        .cloud3 {
            width: 180px;
            height: 55px;
            top: 60%;
            left: 20%;
            animation: float3 28s infinite ease-in-out;
        }

        .cloud3::before {
            width: 65px;
            height: 65px;
            top: -32px;
            left: 25px;
        }

        .cloud3::after {
            width: 85px;
            height: 55px;
            top: -22px;
            right: 25px;
        }

        .cloud4 {
            width: 120px;
            height: 45px;
            top: 10%;
            right: 30%;
            animation: float4 22s infinite ease-in-out;
        }

        .cloud4::before {
            width: 55px;
            height: 55px;
            top: -28px;
            left: 15px;
        }

        .cloud4::after {
            width: 70px;
            height: 45px;
            top: -18px;
            right: 15px;
        }

        @keyframes float1 {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(30px, -20px); }
        }

        @keyframes float2 {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-40px, 15px); }
        }

        @keyframes float3 {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(25px, 10px); }
        }

        @keyframes float4 {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-20px, -15px); }
        }

        /* Fly styles */
        .fly {
            position: absolute;
            width: 20px;
            height: 20px;
            transition: all 0.5s ease-in-out;
            z-index: 100;
        }

        .fly-body {
            position: absolute;
            width: 12px;
            height: 16px;
            background: #1a1a1a;
            border-radius: 50% 50% 60% 60%;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        .fly-body::before {
            content: '';
            position: absolute;
            width: 8px;
            height: 10px;
            background: #1a1a1a;
            border-radius: 50%;
            top: -6px;
            left: 2px;
        }

        .fly-wing {
            position: absolute;
            width: 14px;
            height: 10px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            top: 3px;
            animation: wingFlap 0.1s infinite alternate;
        }

        .fly-wing.left {
            left: -8px;
            transform-origin: right center;
        }

        .fly-wing.right {
            right: -8px;
            transform-origin: left center;
        }

        @keyframes wingFlap {
            0% { transform: rotateY(0deg); opacity: 0.5; }
            100% { transform: rotateY(25deg); opacity: 0.8; }
        }

        .fly-legs {
            position: absolute;
            width: 1px;
            height: 4px;
            background: #000;
            bottom: -2px;
        }

        .fly-legs.l1 { left: 3px; }
        .fly-legs.l2 { left: 6px; }
        .fly-legs.l3 { left: 9px; }
        .fly-legs.r1 { right: 3px; }
        .fly-legs.r2 { right: 6px; }
        .fly-legs.r3 { right: 9px; }
    </style>
</head>
<body>
    <!-- Clouds -->
    <div class="cloud cloud1"></div>
    <div class="cloud cloud2"></div>
    <div class="cloud cloud3"></div>
    <div class="cloud cloud4"></div>

    <!-- Fly -->
    <div class="fly" id="fly">
        <div class="fly-body"></div>
        <div class="fly-wing left"></div>
        <div class="fly-wing right"></div>
        <div class="fly-legs l1"></div>
        <div class="fly-legs l2"></div>
        <div class="fly-legs l3"></div>
        <div class="fly-legs r1"></div>
        <div class="fly-legs r2"></div>
        <div class="fly-legs r3"></div>
    </div>

    <script>
        const fly = document.getElementById('fly');
        const margin = 50; // Keep fly away from edges

        // Audio context for procedural sound generation
        let audioContext;
        let buzzOscillator;
        let lfoOscillator;
        let gainNode;
        let lfoGain;
        let isAudioInitialized = false;

        function initAudio() {
            if (isAudioInitialized) return;

            // Create audio context
            audioContext = new (window.AudioContext || window.webkitAudioContext)();

            // Create the main buzz oscillator (this is the fly's wing beating sound)
            buzzOscillator = audioContext.createOscillator();
            buzzOscillator.type = 'sawtooth'; // Sawtooth gives a buzzy sound
            buzzOscillator.frequency.value = 280; // Base frequency around 280 Hz (typical fly buzz)

            // Create LFO (Low Frequency Oscillator) for vibrato effect
            lfoOscillator = audioContext.createOscillator();
            lfoOscillator.type = 'sine';
            lfoOscillator.frequency.value = 6; // 6 Hz variation

            // LFO gain to control how much the LFO affects the main frequency
            lfoGain = audioContext.createGain();
            lfoGain.gain.value = 15; // Frequency variation amount

            // Main gain node for volume control
            gainNode = audioContext.createGain();
            gainNode.gain.value = 0.08; // Keep it quiet so it's not annoying

            // Connect the LFO to modulate the buzz frequency
            lfoOscillator.connect(lfoGain);
            lfoGain.connect(buzzOscillator.frequency);

            // Connect buzz oscillator to gain to speakers
            buzzOscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            // Start the oscillators
            buzzOscillator.start();
            lfoOscillator.start();

            isAudioInitialized = true;
        }

        function varyBuzzSound() {
            if (!isAudioInitialized) return;

            // Randomly vary the buzz frequency (flies change their wing beat)
            const baseFreq = 260 + Math.random() * 60; // Between 260-320 Hz
            buzzOscillator.frequency.setTargetAtTime(baseFreq, audioContext.currentTime, 0.1);

            // Vary the LFO speed occasionally
            if (Math.random() < 0.3) {
                const lfoSpeed = 4 + Math.random() * 6; // Between 4-10 Hz
                lfoOscillator.frequency.setTargetAtTime(lfoSpeed, audioContext.currentTime, 0.1);
            }

            // Occasionally add a slight volume variation (fly getting closer/farther)
            const volume = 0.06 + Math.random() * 0.04; // Between 0.06-0.1
            gainNode.gain.setTargetAtTime(volume, audioContext.currentTime, 0.2);
        }

        function getRandomPosition() {
            const maxX = window.innerWidth - margin;
            const maxY = window.innerHeight - margin;

            return {
                x: Math.random() * (maxX - margin) + margin,
                y: Math.random() * (maxY - margin) + margin
            };
        }

        function moveFly() {
            const pos = getRandomPosition();
            fly.style.left = pos.x + 'px';
            fly.style.top = pos.y + 'px';

            // Random rotation for variety
            const rotation = Math.random() * 360;
            fly.style.transform = `rotate(${rotation}deg)`;

            // Vary the buzz sound when fly moves
            varyBuzzSound();

            // Random next movement time (between 0.5 and 2 seconds)
            const nextMove = Math.random() * 1500 + 500;
            setTimeout(moveFly, nextMove);
        }

        // Initialize audio on first user interaction (browsers require this)
        document.addEventListener('click', () => {
            initAudio();
        }, { once: true });

        // Also try to init on any key press
        document.addEventListener('keypress', () => {
            initAudio();
        }, { once: true });

        // Start the fly movement
        moveFly();
    </script>
</body>
</html>
